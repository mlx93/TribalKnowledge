# =============================================================================
# Tribal Knowledge Slack Bot Configuration
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp env.template .env

# -----------------------------------------------------------------------------
# Slack Credentials (from https://api.slack.com/apps - App ID: A0A4TQ1NV5W)
# -----------------------------------------------------------------------------

# Socket Mode App-Level Token (starts with xapp-)
# Settings > Socket Mode > Enable Socket Mode > Generate Token
SLACK_APP_TOKEN=xapp-your-app-level-token

# Bot User OAuth Token (starts with xoxb-)
# OAuth & Permissions > Bot User OAuth Token
SLACK_BOT_TOKEN=xoxb-your-bot-token

# Signing Secret (for request verification)
# Basic Information > App Credentials > Signing Secret
SLACK_SIGNING_SECRET=your-signing-secret

# -----------------------------------------------------------------------------
# MCP Server URLs (Both Deployed - No Local Setup Needed!)
# -----------------------------------------------------------------------------

# Schema context server (table docs, schema search)
MCP_SYNTH_URL=https://company-mcp.com/mcp/synth

# SQL execution server (read-only queries)
MCP_POSTGRES_URL=https://company-mcp.com/mcp/postgres

# -----------------------------------------------------------------------------
# LLM Configuration
# -----------------------------------------------------------------------------

# Primary: OpenRouter (Claude) - https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-your-openrouter-key

# Fallback: OpenAI (GPT-4o) - https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-key

# Model selection (optional - these are the defaults)
# Primary: gpt-4o (OpenAI) - fast and reliable
# Fallback: gpt-4o-mini (cheaper fallback)
# For Claude: use anthropic/claude-sonnet-4 (requires OpenRouter credits)
LLM_PRIMARY_MODEL=gpt-4o
LLM_FALLBACK_MODEL=gpt-4o-mini
LLM_FALLBACK_ENABLED=true

# -----------------------------------------------------------------------------
# Storage & Logging
# -----------------------------------------------------------------------------

# SQLite database for thread context and cache persistence
# Docker: /data/thread_contexts.db (mounted volume)
# Local: ./data/thread_contexts.db
THREAD_CONTEXT_DB=./data/thread_contexts.db

# Logging level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Query Cache Settings
# -----------------------------------------------------------------------------

# Enable/disable response caching
CACHE_ENABLED=true

# Auto-cache all tool responses (default: false = explicit mode)
# When false, only cache responses when user reacts with ðŸ“¦
# When true, automatically cache all successful responses
CACHE_AUTO_SAVE=false

# Cache entry lifetime in seconds (default: 7 days)
CACHE_TTL_SECONDS=604800

# Word overlap threshold for fuzzy matching (0.0 to 1.0)
# Default 0.99 = essentially exact match only
CACHE_FUZZY_THRESHOLD=0.99

